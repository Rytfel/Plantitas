<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a Interactiva de Salud Vegetal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Warm Harmony -->
    <!-- Application Structure Plan: The application is structured as a single-page interactive dashboard. A primary top navigation allows users to select one of six key environmental factors (Luz, Temperatura, Humedad, Agua, Ventilaci√≥n, Nutrientes). Selecting a factor dynamically displays a dedicated content section. Each section features an interactive toggle (e.g., 'Deficiencia' vs. 'Exceso') that updates a display of symptom cards. This design prioritizes rapid, comparative diagnosis over linear reading of the source report. A 'Saber M√°s' button in each section reveals detailed physiological information in a modal, keeping the main interface clean and user-focused. The 'Nutrientes' section uses a unique interactive plant diagram to visually explain nutrient mobility, a core concept. This structure was chosen to transform the dense report into a practical, user-driven diagnostic tool, directly addressing the goal of helping users identify plant problems. -->
    <!-- Visualization & Content Choices: Report Info: Symptoms of environmental stress (excess/deficiency for light, temp, etc.) -> Goal: Allow easy comparison and diagnosis -> Viz/Presentation: Interactive content cards that dynamically change based on a 'Deficiency'/'Excess' toggle. Interaction: User clicks toggle to switch views. Justification: This is more engaging and efficient for comparison than static side-by-side tables. | Report Info: Nutrient deficiency/toxicity symptoms and mobility -> Goal: Explain where symptoms appear based on nutrient mobility -> Viz/Presentation: An interactive plant diagram (HTML/CSS) linked to nutrient selection buttons. Interaction: User clicks a nutrient, the diagram highlights the affected plant area (old/new leaves), and a card shows details. Justification: This visually demonstrates the abstract concept of mobility, making it easier to understand and diagnose. Library/Method: Vanilla JavaScript for all interactions and dynamic content. No charts (Chart.js/Plotly) are needed as the data is qualitative. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #556B2F; /* DarkOliveGreen */
            color: #F5F5DC; /* Beige */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .toggle-btn {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .toggle-btn.active {
            background-color: #8FBC8F; /* DarkSeaGreen */
            color: #2F4F4F; /* DarkSlateGray */
            border-color: #556B2F;
        }
        .symptom-card {
            background-color: #FFFFFF;
            border-left: 5px solid #8FBC8F;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .symptom-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .modal {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        .modal.active {
            display: flex;
        }
        .nutrient-list button.active {
            background-color: #8FBC8F;
            color: white;
        }
        .plant-diagram .plant-part {
            transition: all 0.3s ease;
            cursor: default;
        }
        .plant-diagram .highlight {
            transform: scale(1.1);
            filter: drop-shadow(0 0 8px #FFD700);
        }
    </style>
</head>
<body class="bg-[#F5F5DC] text-[#2F4F4F]">

    <div id="app" class="container mx-auto p-4 md:p-8 max-w-7xl">
         <header class="bg-gradient-to-r from-sky-700 via-cyan-600 to-teal-500 text-white py-16 shadow-xl">
    <div class="container mx-auto max-w-5xl text-center px-4">
      <h1 class="text-4xl md:text-5xl font-extrabold mb-4 drop-shadow-lg">Laboratorio Interactivo de Cinem√°tica</h1>
      <p class="text-lg md:text-xl text-cyan-100">Explora, Calcula y Comprende el Movimiento Vertical</p>
    </div>
  </header>

        <nav id="main-nav" class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8">
        </nav>

        <main id="main-content">
        </main>

        <div id="modal" class="modal fixed inset-0 bg-black bg-opacity-60 items-center justify-center p-4">
            <div class="bg-[#F5F5DC] rounded-lg shadow-2xl p-6 md:p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto relative">
                <h2 id="modal-title" class="text-2xl font-bold text-[#556B2F] mb-4"></h2>
                <div id="modal-body" class="text-[#4A4A4A] space-y-4"></div>
                <button id="modal-close" class="absolute top-4 right-4 text-2xl font-bold text-[#2F4F4F] hover:text-red-500 transition">&times;</button>
            </div>
        </div>

    </div>

    <script>
        const appData = {
            luz: {
                title: "Luz: Energ√≠a y Se√±alizaci√≥n",
                intro: "La luz es la fuente de energ√≠a primaria para la fotos√≠ntesis y una se√±al clave que regula el crecimiento y desarrollo de la planta (fotomorfog√©nesis). Su exceso o deficiencia impacta directamente en la salud y apariencia de tu planta.",
                fisiologia: `
                    <h3 class="font-bold text-lg text-[#556B2F]">Fotos√≠ntesis y Fotomorfog√©nesis</h3>
                    <p>La fotos√≠ntesis convierte la energ√≠a lum√≠nica en energ√≠a qu√≠mica (glucosa). La luz tambi√©n regula la forma de la planta, la germinaci√≥n y la floraci√≥n a trav√©s de fotorreceptores como el fitocromo y el criptocromo. Estos pigmentos le 'dicen' a la planta cu√°ndo crecer, cu√°ndo florecer y c√≥mo orientarse.</p>
                    <h3 class="font-bold text-lg text-[#556B2F] mt-2">Fotoperiodismo</h3>
                    <p>Las plantas miden la duraci√≥n del d√≠a y la noche para sincronizar su floraci√≥n. Las plantas de 'd√≠a corto' florecen con noches largas, mientras que las de 'd√≠a largo' necesitan noches cortas. Las de 'd√≠a neutro' florecen independientemente de la duraci√≥n de la luz.</p>
                `,
                sintomas: {
                    exceso: [
                        { icon: '‚òÄÔ∏è', title: 'Decoloraci√≥n y Quemaduras', text: 'Hojas amarillas, blancas o con manchas marrones secas. Pueden adquirir tonos rojizos.' },
                        { icon: 'üçÉ', title: 'Hojas Curvadas', text: 'Las hojas se curvan hacia arriba ("tacoing") o hacia abajo para reducir la exposici√≥n.' },
                        { icon: 'ü§ï', title: 'Crecimiento Atrofiado', text: 'La planta crece lenta o se detiene, desviando energ√≠a para reparar da√±os.' },
                        { icon: 'üå∏', title: 'Flores de Baja Calidad', text: 'Flores blanqueadas, quemadas y con menor producci√≥n de aromas.' }
                    ],
                    deficiencia: [
                        { icon: 'üå±', title: 'Etiolaci√≥n (Estiramiento)', text: 'Tallos largos, delgados y d√©biles que se estiran buscando luz.' },
                        { icon: 'üçÇ', title: 'Hojas Peque√±as y Amarillentas', text: 'Hojas nuevas peque√±as; las viejas amarillean y caen. P√©rdida de coloraci√≥n en plantas no verdes.' },
                        { icon: 'üèµÔ∏è', title: 'Falta de Floraci√≥n', text: 'Producci√≥n de flores y frutos muy limitada o ausente por falta de energ√≠a.' },
                        { icon: 'üåø', title: 'Crecimiento Inclinado', text: 'La planta se inclina visiblemente hacia la fuente de luz m√°s cercana.' }
                    ]
                }
            },
            temperatura: {
                title: "Temperatura: Regulador Metab√≥lico",
                intro: "La temperatura regula la velocidad de las reacciones qu√≠micas en la planta, incluyendo la fotos√≠ntesis, la respiraci√≥n y la absorci√≥n de nutrientes. Cada planta tiene un rango de temperatura √≥ptimo para prosperar.",
                 fisiologia: `
                    <h3 class="font-bold text-lg text-[#556B2F]">Impacto Metab√≥lico</h3>
                    <p>Las enzimas que controlan el metabolismo son muy sensibles a la temperatura. Temperaturas altas aceleran la respiraci√≥n (consumo de energ√≠a) y pueden reducir la fotos√≠ntesis neta. Bajas temperaturas ralentizan todos los procesos, incluida la absorci√≥n de nutrientes y agua, que se vuelve m√°s viscosa.</p>
                    <h3 class="font-bold text-lg text-[#556B2F] mt-2">Crecimiento de √ìrganos</h3>
                    <p>La temperatura del suelo es cr√≠tica para el desarrollo de las ra√≠ces. Ra√≠ces fr√≠as absorben mal el agua y los nutrientes, causando estr√©s h√≠drico en la parte a√©rea aunque el sustrato est√© h√∫medo. El crecimiento de tallos, hojas y frutos tambi√©n depende de rangos t√©rmicos espec√≠ficos.</p>
                `,
                sintomas: {
                    exceso: [
                        { icon: 'ü•µ', title: 'Hojas Curvadas y Quemadas', text: 'Se curvan hacia arriba, con manchas y bordes marrones secos. Blanqueamiento en la parte superior.' },
                        { icon: '‚è≥', title: 'Crecimiento Retardado', text: 'El crecimiento general se ralentiza o se atrofia.' },
                        { icon: 'ü•Ä', title: 'Anomal√≠as en Floraci√≥n', text: 'Deformaciones como "foxtailing" (flores que crecen sobre otras) y p√©rdida de calidad.' },
                        { icon: 'üíß', title: 'Marchitamiento', text: 'La planta transpira m√°s r√°pido de lo que puede absorber agua, causando marchitez.' }
                    ],
                    deficiencia: [
                        { icon: 'ü•∂', title: 'Amarillamiento y Marchitez', text: 'S√≠ntomas de da√±o por fr√≠o (chilling). La planta envejece prematuramente.' },
                        { icon: 'üßä', title: 'Da√±o por Congelaci√≥n', text: 'Tejido con aspecto mojado o transl√∫cido que luego se vuelve marr√≥n. Da√±o irreversible.' },
                        { icon: 'üçé', title: 'Da√±o en Frutos', text: 'Manchas en la piel (picado, escaldado), pardeamiento interno y malos sabores.' },
                        { icon: 'üìâ', title: 'Absorci√≥n Deficiente', text: 'Las ra√≠ces fr√≠as no absorben bien agua y nutrientes, causando s√≠ntomas de deficiencia.' }
                    ]
                }
            },
            humedad: {
                title: "Humedad Ambiental: Equilibrio H√≠drico",
                intro: "La humedad relativa del aire influye directamente en la transpiraci√≥n de la planta (p√©rdida de agua por las hojas). Un desequilibrio puede causar deshidrataci√≥n o favorecer la aparici√≥n de enfermedades.",
                fisiologia: `
                    <h3 class="font-bold text-lg text-[#556B2F]">Transpiraci√≥n y Estomas</h3>
                    <p>Las plantas 'respiran' a trav√©s de poros llamados estomas. La transpiraci√≥n es la evaporaci√≥n de agua a trav√©s de ellos, lo que crea una succi√≥n que arrastra agua y nutrientes desde las ra√≠ces. Una humedad ambiental baja acelera la transpiraci√≥n, mientras que una humedad alta la frena.</p>
                    <h3 class="font-bold text-lg text-[#556B2F] mt-2">Intercambio Gaseoso y Salud</h3>
                    <p>Un equilibrio en la transpiraci√≥n es vital. Si es muy baja (alta humedad), se reduce la absorci√≥n de nutrientes. Si es muy alta (baja humedad), la planta puede deshidratarse. El aire estancado y la alta humedad crean un microclima ideal para hongos y enfermedades.</p>
                `,
                sintomas: {
                    exceso: [
                        { icon: 'üíß', title: 'Crecimiento D√©bil y Hojas Ca√≠das', text: 'Las hojas caen sin motivo aparente y la planta luce lacia. Puede haber deficiencias de nutrientes.' },
                        { icon: 'üçÑ', title: 'Enfermedades F√∫ngicas', text: 'Aparici√≥n de moho (blanco o gris) en hojas, tallos o sustrato.' },
                        { icon: 'ü´ß', title: 'Edema', text: 'Ampollas acuosas o manchas en el env√©s de las hojas, que se vuelven quebradizas.' },
                        { icon: 'ü¶ü', title: 'Moscas del Sustrato', text: 'El ambiente h√∫medo y encharcado favorece la proliferaci√≥n de plagas.' }
                    ],
                    deficiencia: [
                        { icon: 'üçÇ', title: 'Hojas Secas y Quebradizas', text: 'Puntas y bordes marrones, aspecto seco y crujiente.' },
                        { icon: 'ü•Ä', title: 'Marchitamiento R√°pido', text: 'La planta pierde agua m√°s r√°pido de lo que la absorbe, provocando que se marchite.' },
                        { icon: 'üêú', title: 'Aumento de Plagas', text: 'Condiciones secas favorecen a plagas como la ara√±uela roja.' },
                        { icon: 'üìâ', title: 'Crecimiento Atrofiado', text: 'Hojas peque√±as y crecimiento lento debido a la deshidrataci√≥n constante.' }
                    ]
                }
            },
            agua: {
                title: "Agua y Sustrato: El D√∫o Vital",
                intro: "El riego es crucial, pero un error com√∫n es dar demasiada o muy poca agua. El problema no es solo la cantidad de agua, sino tambi√©n la cantidad de ox√≠geno disponible para las ra√≠ces, lo cual depende del sustrato.",
                fisiologia: `
                    <h3 class="font-bold text-lg text-[#556B2F]">Absorci√≥n y Transporte</h3>
                    <p>Las ra√≠ces absorben agua y nutrientes disueltos por √≥smosis. Este 'caldo' (savia bruta) asciende por el xilema gracias a la tensi√≥n creada por la transpiraci√≥n en las hojas. Es un sistema continuo e interdependiente.</p>
                    <h3 class="font-bold text-lg text-[#556B2F] mt-2">Hipoxia Radicular (Exceso de Agua)</h3>
                    <p>El s√≠ntoma m√°s enga√±oso es la marchitez por exceso de riego. Cuando el sustrato se encharca, el agua desplaza al ox√≠geno. Sin ox√≠geno (hipoxia), las ra√≠ces no pueden respirar, su funci√≥n de absorci√≥n falla y se pudren. La planta se marchita porque, aunque est√° en agua, no puede absorberla.</p>
                `,
                sintomas: {
                    exceso: [
                        { icon: 'üü°', title: 'Hojas Amarillas y Blandas', text: 'Las hojas, especialmente las inferiores, amarillean y caen sin estar secas. Se sienten blandas al tacto.' },
                        { icon: 'ü•Ä', title: 'Marchitamiento General', text: 'La planta entera se ve ca√≠da y lacia, incluso con el sustrato h√∫medo. Es el s√≠ntoma m√°s confuso.' },
                        { icon: 'ü§¢', title: 'Pudrici√≥n de Ra√≠ces', text: 'Ra√≠ces oscuras, blandas y con mal olor. El sustrato huele a humedad o podrido.' },
                        { icon: 'üåø', title: 'Crecimiento Detenido y D√©bil', text: 'La planta deja de crecer y se debilita progresivamente.' }
                    ],
                    deficiencia: [
                        { icon: 'üçÇ', title: 'Hojas Marchitas y Secas', text: 'Las hojas se ven ca√≠das, lacias y con el tiempo se vuelven secas y crujientes.' },
                        { icon: 'ü™¥', title: 'Sustrato Compacto y Separado', text: 'La tierra se seca tanto que se contrae y se separa de los bordes de la maceta.' },
                        { icon: 'üìâ', title: 'Crecimiento Lento', text: 'Las hojas nuevas son m√°s peque√±as y el crecimiento general es muy lento.' },
                        { icon: 'üü§', title: 'Puntas y Bordes Marrones', text: 'Las puntas y los bordes de las hojas se secan y se vuelven marrones.' }
                    ]
                }
            },
            ventilacion: {
                title: "Ventilaci√≥n: El Flujo de Aire",
                intro: "Un buen flujo de aire es vital. Renueva el di√≥xido de carbono (CO2) necesario para la fotos√≠ntesis, ayuda a controlar la temperatura y la humedad, y previene la acumulaci√≥n de pat√≥genos.",
                fisiologia: `
                    <h3 class="font-bold text-lg text-[#556B2F]">Intercambio Gaseoso y Capa L√≠mite</h3>
                    <p>La ventilaci√≥n renueva el aire alrededor de las hojas, asegurando un suministro constante de CO2. Tambi√©n rompe la 'capa l√≠mite', una fina pel√≠cula de aire h√∫medo y estancado que se forma sobre la superficie de la hoja. Romperla ayuda a regular la transpiraci√≥n y la temperatura foliar.</p>
                    <h3 class="font-bold text-lg text-[#556B2F] mt-2">Prevenci√≥n de Enfermedades</h3>
                    <p>El aire estancado crea bolsas de alta humedad, el ambiente perfecto para que esporas de hongos germinen. Una buena circulaci√≥n de aire seca la superficie de las hojas y el sustrato, dificultando la proliferaci√≥n de moho y otras enfermedades.</p>
                `,
                sintomas: {
                    exceso: [
                        { icon: 'üå¨Ô∏è', title: 'Hojas en Forma de Garra', text: 'Las hojas se curvan hacia abajo por el estr√©s mec√°nico constante del viento.' },
                        { icon: 'üü§', title: 'Manchas y Quemaduras por Viento', text: 'Aparecen manchas de color bronce o marr√≥n en las hojas expuestas a corrientes fuertes.' },
                        { icon: 'üìâ', title: 'Crecimiento Atrofiado', text: 'La planta desv√≠a energ√≠a para reparar el da√±o f√≠sico en lugar de crecer.' },
                        { icon: 'üíî', title: 'Da√±o F√≠sico', text: 'Ramas rotas o tallos doblados debido a corrientes de aire muy intensas.' }
                    ],
                    deficiencia: [
                        { icon: 'üçÑ', title: 'Moho y Hongos', text: 'Crecimiento de moho blanco o gris√°ceo sobre las hojas o el sustrato.' },
                        { icon: 'ü¶ü', title: 'Proliferaci√≥n de Plagas', text: 'El aire estancado es ideal para insectos como la mosca del sustrato, pulgones y mosca blanca.' },
                        { icon: 'üå±', title: 'Crecimiento D√©bil y Lento', text: 'La falta de CO2 y la alta humedad ralentizan la fotos√≠ntesis y el crecimiento.' },
                        { icon: '‚ô®Ô∏è', title: 'Calor y Humedad Estancados', text: 'Se crean "bolsas" de aire caliente y h√∫medo que estresan a la planta.' }
                    ]
                }
            },
            nutrientes: {
                title: "Nutrientes: Bloques de Construcci√≥n",
                intro: "Las plantas necesitan una disponibilidad balanceada de macro y micronutrientes. La clave para diagnosticar deficiencias es observar d√≥nde aparecen los s√≠ntomas primero: en hojas viejas (nutrientes m√≥viles) o en hojas nuevas (nutrientes inm√≥viles).",
                fisiologia: `
                    <h3 class="font-bold text-lg text-[#556B2F]">Movilidad de Nutrientes</h3>
                    <p>Este es el concepto m√°s importante. Los <strong>nutrientes m√≥viles</strong> (como Nitr√≥geno, F√≥sforo, Potasio) pueden ser transportados por la planta desde las hojas viejas hacia las nuevas cuando hay escasez. Por eso, los s√≠ntomas de su deficiencia aparecen primero en las hojas viejas, f√°cilmente las podemos reconocer porque est√°n m√°s abajo de las ramas y troncos.</p>
                    <p>Los <strong>nutrientes inm√≥viles</strong> (como Calcio, Azufre, Hierro, Boro) no pueden moverse una vez que han sido depositados en un tejido. Si faltan, los nuevos brotes y las hojas j√≥venes no pueden obtenerlos de las partes viejas, solo se transportan por el xilema desde las ra√≠ces y son los primeros en mostrar s√≠ntomas.</p>
                    <h3 class="font-bold text-lg text-[#556B2F] mt-2">Importancia del pH</h3>
                    <p>A veces, el nutriente est√° en el sustrato, pero la planta no puede absorberlo porque el pH del suelo es incorrecto. Un pH inadecuado 'bloquea' la disponibilidad de ciertos nutrientes. Por eso, antes de fertilizar, es bueno considerar el pH. Muchas de las plantas que tenemos en el hogar no suelen tener problemas con el pH, pero si, niveles muy extremos de acidez o alcalinidad pueden afectar la abserci√≥n de nutrientes.</p>
                `,
                list: {
                    N: { name: "Nitr√≥geno (N)", mobility: "M√≥vil", part: 'old-leaves', deficiencia: 'Hojas inferiores se vuelven amarillas de manera uniforme. Crecimiento general lento y d√©bil.', toxicidad: 'Follaje excesivamente oscuro y d√©bil, poca floraci√≥n. Tallos fr√°giles y quebradizos.' },
                    P: { name: "F√≥sforo (P)", mobility: "M√≥vil", part: 'old-leaves', deficiencia: 'Hojas viejas de color verde oscuro, con tonos p√∫rpuras o rojizos. Crecimiento atrofiado.', toxicidad: 'Rara. Puede bloquear la absorci√≥n de Zinc y Cobre.' },
                    K: { name: "Potasio (K)", mobility: "M√≥vil", part: 'old-leaves', deficiencia: 'Bordes y puntas de las hojas viejas se queman (se ven marrones y secos).', toxicidad: 'Puede bloquear la absorci√≥n de Magnesio y Calcio.' },
                    Mg: { name: "Magnesio (Mg)", mobility: "M√≥vil", part: 'old-leaves', deficiencia: 'Amarillamiento entre las venas (venas verdes, tejido amarillo) en hojas viejas.', toxicidad: 'Rara. Un exceso puede bloquear la absorci√≥n de Calcio.' },
                    Ca: { name: "Calcio (Ca)", mobility: "Inm√≥vil", part: 'new-leaves', deficiencia: 'Hojas nuevas y brotes deformados, retorcidos o muertos. Pudrici√≥n apical en frutos.', toxicidad: 'Crecimiento atrofiado, puede bloquear la absorci√≥n de Potasio.' },
                    S: { name: "Azufre (S)", mobility: "Inm√≥vil", part: 'new-leaves', deficiencia: 'Amarillamiento generalizado de las hojas m√°s j√≥venes, similar a la deficiencia de Nitr√≥geno pero en la parte superior.', toxicidad: 'Poco com√∫n. Crecimiento reducido y hojas m√°s peque√±as.' },
                    Fe: { name: "Hierro (Fe)", mobility: "Inm√≥vil", part: 'new-leaves', deficiencia: 'Fuerte amarillamiento entre las venas en las hojas m√°s nuevas (venas muy verdes sobre fondo amarillo p√°lido).', toxicidad: 'Manchas necr√≥ticas de color bronce o marr√≥n en las hojas.' },
                    B: { name: "Boro (B)", mobility: "Inm√≥vil", part: 'new-leaves', deficiencia: 'Puntas de crecimiento (brotes) muertas o quebradizas. Hojas nuevas deformadas.', toxicidad: 'Amarillamiento y quemaduras en las puntas de las hojas, progresando hacia la base.' }
                }
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const mainNav = document.getElementById('main-nav');
            const mainContent = document.getElementById('main-content');
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const modalClose = document.getElementById('modal-close');

            const sections = Object.keys(appData);

            sections.forEach(key => {
                const data = appData[key];
                const navButton = document.createElement('button');
                navButton.className = 'nav-button py-2 px-4 rounded-lg font-semibold bg-white bg-opacity-50 hover:bg-[#8FBC8F] hover:text-white';
                navButton.textContent = data.title.split(':')[0];
                navButton.dataset.section = key;
                mainNav.appendChild(navButton);
                
                if (key === 'nutrientes') {
                    mainContent.appendChild(createNutrientSection(key, data));
                } else {
                    mainContent.appendChild(createStandardSection(key, data));
                }
            });

            function createStandardSection(key, data) {
                const section = document.createElement('section');
                section.id = `section-${key}`;
                section.className = 'content-section bg-[#FEFBF3] p-6 rounded-xl shadow-lg';
                section.innerHTML = `
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h2 class="text-3xl font-bold text-[#556B2F]">${data.title}</h2>
                            <p class="mt-2 text-[#4A4A4A] max-w-2xl">${data.intro}</p>
                        </div>
                        <button class="show-fisiologia-btn text-sm font-semibold text-[#556B2F] hover:underline" data-key="${key}">Saber m√°s</button>
                    </div>
                    <div class="flex justify-center gap-4 mb-6">
                        <button class="toggle-btn stress-toggle py-2 px-6 rounded-md font-bold" data-key="${key}" data-type="deficiencia">Deficiencia</button>
                        <button class="toggle-btn stress-toggle py-2 px-6 rounded-md font-bold" data-key="${key}" data-type="exceso">Exceso</button>
                    </div>
                    <div id="symptoms-grid-${key}" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    </div>
                `;
                return section;
            }

            function createNutrientSection(key, data) {
                 const section = document.createElement('section');
                section.id = `section-${key}`;
                section.className = 'content-section bg-[#FEFBF3] p-6 rounded-xl shadow-lg';
                
                const nutrientButtons = Object.keys(data.list).map(nKey => 
                    `<button class="nutrient-btn py-2 px-3 rounded-md font-semibold bg-white hover:bg-[#8FBC8F] hover:text-white transition" data-nutrient="${nKey}">${data.list[nKey].name}</button>`
                ).join('');

                section.innerHTML = `
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h2 class="text-3xl font-bold text-[#556B2F]">${data.title}</h2>
                            <p class="mt-2 text-[#4A4A4A] max-w-2xl">${data.intro}</p>
                        </div>
                        <button class="show-fisiologia-btn text-sm font-semibold text-[#556B2F] hover:underline" data-key="${key}">Saber m√°s</button>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-1 flex flex-col items-center justify-center">
                            <h3 class="text-xl font-bold mb-4 text-center">Diagrama de la Planta</h3>
                             <div class="plant-diagram w-48 h-80 relative">
                                <div id="plant-new-leaves" class="plant-part absolute top-0 left-1/2 -translate-x-1/2 w-24 h-24 bg-green-500 rounded-full" style="clip-path: ellipse(50% 40% at 50% 50%);"></div>
                                <div class="plant-part absolute top-20 left-1/2 -translate-x-1/2 w-4 h-48 bg-green-700"></div>
                                <div id="plant-old-leaves" class="plant-part absolute top-24 left-1/2 -translate-x-1/2 w-32 h-32 bg-green-600 rounded-full" style="clip-path: ellipse(50% 40% at 50% 60%);"></div>
                                <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-40 h-8 bg-yellow-900 rounded-t-lg"></div>
                                <p class="absolute -top-2 left-1/2 -translate-x-1/2 text-xs font-bold text-white bg-black/50 px-2 py-1 rounded">Hojas Nuevas</p>
                                <p class="absolute top-40 left-1/2 -translate-x-1/2 text-xs font-bold text-white bg-black/50 px-2 py-1 rounded">Hojas Viejas</p>
                            </div>
                        </div>
                        <div class="lg:col-span-2">
                             <div class="nutrient-list flex flex-wrap justify-center gap-2 mb-4">${nutrientButtons}</div>
                             <div id="nutrient-info" class="mt-4 p-4 bg-white rounded-lg shadow-inner min-h-[200px]">
                                <p class="text-center text-gray-500">Selecciona un nutriente para ver sus detalles.</p>
                             </div>
                        </div>
                    </div>
                `;
                return section;
            }

            function updateSymptoms(key, type) {
                const grid = document.getElementById(`symptoms-grid-${key}`);
                const symptoms = appData[key].sintomas[type];
                grid.innerHTML = symptoms.map(symptom => `
                    <div class="symptom-card p-4 rounded-lg shadow-md">
                        <div class="flex items-center gap-4">
                            <span class="text-3xl">${symptom.icon}</span>
                            <div>
                                <h4 class="font-bold text-lg text-[#556B2F]">${symptom.title}</h4>
                                <p class="text-sm text-[#4A4A4A]">${symptom.text}</p>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            function showNutrientInfo(nutrientKey) {
                const infoContainer = document.getElementById('nutrient-info');
                const nutrient = appData.nutrientes.list[nutrientKey];
                
                infoContainer.innerHTML = `
                    <h3 class="text-xl font-bold text-[#556B2F]">${nutrient.name}</h3>
                    <p class="text-sm font-semibold ${nutrient.mobility === 'M√≥vil' ? 'text-blue-600' : 'text-red-600'}">${nutrient.mobility}</p>
                    <div class="mt-4 space-y-3">
                        <div>
                           <h4 class="font-bold">S√≠ntomas de Deficiencia:</h4>
                           <p class="text-[#4A4A4A]">${nutrient.deficiencia}</p>
                        </div>
                        <div>
                           <h4 class="font-bold">S√≠ntomas de Toxicidad:</h4>
                           <p class="text-[#4A4A4A]">${nutrient.toxicidad}</p>
                        </div>
                    </div>
                `;
                
                document.querySelectorAll('.plant-diagram .plant-part').forEach(p => p.classList.remove('highlight'));
                if (nutrient.part === 'old-leaves') {
                    document.getElementById('plant-old-leaves').classList.add('highlight');
                } else if(nutrient.part === 'new-leaves') {
                    document.getElementById('plant-new-leaves').classList.add('highlight');
                }
            }

            mainNav.addEventListener('click', (e) => {
                if (e.target.matches('.nav-button')) {
                    const sectionKey = e.target.dataset.section;
                    
                    document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');

                    document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
                    document.getElementById(`section-${sectionKey}`).classList.add('active');
                    
                    if(sectionKey !== 'nutrientes') {
                        const defaultToggle = document.querySelector(`.stress-toggle[data-key="${sectionKey}"][data-type="deficiencia"]`);
                        defaultToggle.click();
                    } else {
                         const defaultNutrient = document.querySelector('.nutrient-btn');
                         if(defaultNutrient) defaultNutrient.click();
                    }
                }
            });

            mainContent.addEventListener('click', (e) => {
                if (e.target.matches('.stress-toggle')) {
                    const key = e.target.dataset.key;
                    const type = e.target.dataset.type;
                    document.querySelectorAll(`.stress-toggle[data-key="${key}"]`).forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    updateSymptoms(key, type);
                }
                
                if (e.target.matches('.show-fisiologia-btn')) {
                    const key = e.target.dataset.key;
                    modalTitle.textContent = appData[key].title;
                    modalBody.innerHTML = appData[key].fisiologia;
                    modal.classList.add('active');
                }

                if (e.target.matches('.nutrient-btn')) {
                    const nutrientKey = e.target.dataset.nutrient;
                    document.querySelectorAll('.nutrient-btn').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    showNutrientInfo(nutrientKey);
                }
            });

            modalClose.addEventListener('click', () => modal.classList.remove('active'));
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
            
            document.querySelector('.nav-button').click();
        });
    </script>
</body>
</html>
